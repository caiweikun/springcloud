
ä¸­æ–‡å‚è€ƒæ–‡æ¡£
https://es.xiaoleilu.com

Elasticsearchæ˜¯ä¸€ä¸ªåŸºäºApache Lucene(TM)çš„å¼€æºæœç´¢å¼•æ“ã€‚æ— è®ºåœ¨å¼€æºè¿˜æ˜¯ä¸“æœ‰é¢†åŸŸï¼ŒLuceneå¯ä»¥è¢«è®¤ä¸ºæ˜¯è¿„ä»Šä¸ºæ­¢æœ€å…ˆè¿›ã€æ€§èƒ½æœ€å¥½çš„ã€åŠŸèƒ½æœ€å…¨çš„æœç´¢å¼•æ“åº“ã€‚
ä½†æ˜¯ï¼ŒLuceneåªæ˜¯ä¸€ä¸ªåº“ã€‚æƒ³è¦ä½¿ç”¨å®ƒï¼Œä½ å¿…é¡»ä½¿ç”¨Javaæ¥ä½œä¸ºå¼€å‘è¯­è¨€å¹¶å°†å…¶ç›´æ¥é›†æˆåˆ°ä½ çš„åº”ç”¨ä¸­ï¼Œæ›´ç³Ÿç³•çš„æ˜¯ï¼ŒLuceneéå¸¸å¤æ‚ï¼Œä½ éœ€è¦æ·±å…¥äº†è§£æ£€ç´¢çš„ç›¸å…³çŸ¥è¯†æ¥ç†è§£å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚
Elasticsearchä¹Ÿä½¿ç”¨Javaå¼€å‘å¹¶ä½¿ç”¨Luceneä½œä¸ºå…¶æ ¸å¿ƒæ¥å®ç°æ‰€æœ‰ç´¢å¼•å’Œæœç´¢çš„åŠŸèƒ½ï¼Œä½†æ˜¯å®ƒçš„ç›®çš„æ˜¯é€šè¿‡ç®€å•çš„RESTful APIæ¥éšè—Luceneçš„å¤æ‚æ€§ï¼Œä»è€Œè®©å…¨æ–‡æœç´¢å˜å¾—ç®€å•ã€‚

---------------------------------------------------------------------------------------------

https://www.elastic.co/cn/downloads/elasticsearch

ä¸‹è½½ï¼Œæˆ‘é€‰æ‹©æ˜¯ Macç‰ˆæœ¬

ä¹Ÿå¯ä»¥ç”¨ Homebrew
https://www.elastic.co/guide/en/elasticsearch/reference/7.4/brew.html#brew-layout

To install with Homebrew, you first need to tap the Elastic Homebrew repository:

brew tap elastic/tap

Once youâ€™ve tapped the Elastic Homebrew repo, you can use brew install to install the default distribution of Elasticsearch:

brew install elastic/tap/elasticsearch-full

home
/usr/local/var/homebrew/linked/elasticsearch-full

bin
/usr/local/var/homebrew/linked/elasticsearch-full/bin

conf
/usr/local/etc/elasticsearch

data
/usr/local/var/lib/elasticsearch

logs
/usr/local/var/log/elasticsearch

plugins
/usr/local/var/homebrew/linked/elasticsearch/plugins

--------------------------------------------------------------------------------

æ›´æ–°brew
brew update

å®‰è£…java8
brew cask install homebrew/cask-versions/java8
è¿è¡Œeså¿…é¡»å®‰è£…java

å®‰è£…es
brew install elasticsearch
ä½ ä¹Ÿå¯ä»¥å…ˆ brew search elasticsearch

==> /usr/local/Cellar/elasticsearch/6.8.4/bin/elasticsearch-keystore create
==> Caveats
Data:    /usr/local/var/lib/elasticsearch/
Logs:    /usr/local/var/log/elasticsearch/elasticsearch_caiweikun.log
Plugins: /usr/local/var/elasticsearch/plugins/
Config:  /usr/local/etc/elasticsearch/
To have launchd start elasticsearch now and restart at login:
  brew services start elasticsearch
Or, if you don't want/need a background service you can just run:
  elasticsearch
==> Summary
ğŸº  /usr/local/Cellar/elasticsearch/6.8.4: 133 files, 103.2MB, built in 27 minutes 55 seconds

è¿è¡Œes
brew services start elasticsearch
æŸ¥çœ‹å®‰è£…ä¿¡æ¯æ‰§è¡Œ
brew info elasticsearch

æœ¬åœ°æµè§ˆå™¨è®¿é—®  http://localhost:9200

network.host: 192.168.31.107
transport.tcp.port: 9300
transport.tcp.compress: true
http.port: 9100

-----------------------------------------------------------------------------------------

å®‰è£…Kibana

Kibanaæ˜¯ESçš„ä¸€ä¸ªé…å¥—å·¥å…·ï¼Œå¯ä»¥è®©ç”¨æˆ·åœ¨ç½‘é¡µä¸­ä¸ESè¿›è¡Œäº¤äº’

brew install kibana

Config: /usr/local/etc/kibana/
If you wish to preserve your plugins upon upgrade, make a copy of
/usr/local/opt/kibana/plugins before upgrading, and copy it into the
new keg location after upgrading.

To have launchd start kibana now and restart at login:
  brew services start kibana
Or, if you don't want/need a background service you can just run:
  kibana


å¯åŠ¨Kibana
brew services start kibana

æœ¬åœ°æµè§ˆå™¨è®¿é—®
http://localhost:5601

---------------------------------------------------------------------------------

elasticsearch ç®€å•ä½¿ç”¨ å’Œ ç®€ä»‹

æ‰“å¼€å¦ä¸€ä¸ªç»ˆç«¯è¿›è¡Œæµ‹è¯•ï¼š
curl 'http://localhost:9200/?pretty'

è°ƒç”¨shutdown APIæ¥å…³é—­ï¼š
curl -XPOST 'http://localhost:9200/_shutdown'

å‘Elasticsearchå‘å‡ºçš„è¯·æ±‚çš„ç»„æˆéƒ¨åˆ†ä¸å…¶å®ƒæ™®é€šçš„HTTPè¯·æ±‚æ˜¯ä¸€æ ·çš„ï¼š
curl -X<VERB> '<PROTOCOL>://<HOST>:<PORT>/<PATH>?<QUERY_STRING>' -d '<BODY>'
VERB HTTPæ–¹æ³•ï¼šGET, POST, PUT, HEAD, DELETE

PROTOCOL httpæˆ–è€…httpsåè®®ï¼ˆåªæœ‰åœ¨Elasticsearchå‰é¢æœ‰httpsä»£ç†çš„æ—¶å€™å¯ç”¨ï¼‰
HOST Elasticsearché›†ç¾¤ä¸­çš„ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹çš„ä¸»æœºåï¼Œå¦‚æœæ˜¯åœ¨æœ¬åœ°çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±å«localhost
PORT Elasticsearch HTTPæœåŠ¡æ‰€åœ¨çš„ç«¯å£ï¼Œé»˜è®¤ä¸º9200
PATH APIè·¯å¾„ï¼ˆä¾‹å¦‚_countå°†è¿”å›é›†ç¾¤ä¸­æ–‡æ¡£çš„æ•°é‡ï¼‰ï¼ŒPATHå¯ä»¥åŒ…å«å¤šä¸ªç»„ä»¶ï¼Œä¾‹å¦‚_cluster/statsæˆ–è€…_nodes/stats/jvm
QUERY_STRING ä¸€äº›å¯é€‰çš„æŸ¥è¯¢è¯·æ±‚å‚æ•°ï¼Œä¾‹å¦‚?prettyå‚æ•°å°†ä½¿è¯·æ±‚è¿”å›æ›´åŠ ç¾è§‚æ˜“è¯»çš„JSONæ•°æ®
BODY ä¸€ä¸ªJSONæ ¼å¼çš„è¯·æ±‚ä¸»ä½“ï¼ˆå¦‚æœè¯·æ±‚éœ€è¦çš„è¯ï¼‰

ä¸¾ä¾‹è¯´æ˜ï¼Œä¸ºäº†è®¡ç®—é›†ç¾¤ä¸­çš„æ–‡æ¡£æ•°é‡ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š
curl -XGET 'http://localhost:9200/_count?pretty' -d '
{
    "query": {
        "match_all": {}
    }
}
'

curl -XGET 'http://localhost:9200/_count?pretty' -d '{"query": {"match_all": {}}}'

-------------------------------------------------------------------------------

åœ¨Elasticsearchä¸­ï¼Œæ–‡æ¡£å½’å±äºä¸€ç§ç±»å‹(type),è€Œè¿™äº›ç±»å‹å­˜åœ¨äºç´¢å¼•(index)ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç”»ä¸€äº›ç®€å•çš„å¯¹æ¯”å›¾æ¥ç±»æ¯”ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“ï¼š
Relational DB -> Databases -> Tables -> Rows -> Columns
Elasticsearch -> Indices   -> Types  -> Documents -> Fields
Elasticsearché›†ç¾¤å¯ä»¥åŒ…å«å¤šä¸ªç´¢å¼•(indices)ï¼ˆæ•°æ®åº“ï¼‰ï¼Œæ¯ä¸€ä¸ªç´¢å¼•å¯ä»¥åŒ…å«å¤šä¸ªç±»å‹(types)ï¼ˆè¡¨ï¼‰ï¼Œæ¯ä¸€ä¸ªç±»å‹åŒ…å«å¤šä¸ªæ–‡æ¡£(documents)ï¼ˆè¡Œï¼‰ï¼Œç„¶åæ¯ä¸ªæ–‡æ¡£åŒ…å«å¤šä¸ªå­—æ®µ(Fields)ï¼ˆåˆ—ï¼‰ã€‚


PUT /megacorp/employee/1
{
    "first_name" : "John",
    "last_name" :  "Smith",
    "age" :        25,
    "about" :      "I love to go rock climbing",
    "interests": [ "sports", "music" ]
}

æ£€ç´¢æ–‡æ¡£
GET /megacorp/employee/1
GET /megacorp/employee/_search
GET /megacorp/employee/_search?q=last_name:Smith

ä½¿ç”¨DSLè¯­å¥æŸ¥è¯¢
GET /megacorp/employee/_search
{
    "query" : {
        "match" : {
            "last_name" : "Smith"
        }
    }
}

æ›´å¤æ‚çš„æœç´¢
GET /megacorp/employee/_search
{
    "query" : {
        "filtered" : {
            "filter" : {
                "range" : {
                    "age" : { "gt" : 30 } <1>
                }
            },
            "query" : {
                "match" : {
                    "last_name" : "smith" <2>
                }
            }
        }
    }
}

å…¨æ–‡æœç´¢
GET /megacorp/employee/_search
{
    "query" : {
        "match" : {
            "about" : "rock climbing"
        }
    }
}

é«˜äº®æˆ‘ä»¬çš„æœç´¢
GET /megacorp/employee/_search
{
    "query" : {
        "match_phrase" : {
            "about" : "rock climbing"
        }
    },
    "highlight": {
        "fields" : {
            "about" : {}
        }
    }
}

Elasticsearchæœ‰ä¸€ä¸ªåŠŸèƒ½å«åšèšåˆ(aggregations)ï¼Œå®ƒå…è®¸ä½ åœ¨æ•°æ®ä¸Šç”Ÿæˆå¤æ‚çš„åˆ†æç»Ÿè®¡ã€‚å®ƒå¾ˆåƒSQLä¸­çš„GROUP BYä½†æ˜¯åŠŸèƒ½æ›´å¼ºå¤§ã€‚
è®©æˆ‘ä»¬ç»Ÿè®¡æ¯ç§å…´è¶£ä¸‹èŒå‘˜çš„å¹³å‡å¹´é¾„ï¼š
GET /megacorp/employee/_search
{
    "aggs" : {
        "all_interests" : {
            "terms" : { "field" : "interests" },
            "aggs" : {
                "avg_age" : {
                    "avg" : { "field" : "age" }
                }
            }
        }
    }
}

------------------------------------------------------------

ä¸€ä¸ªèŠ‚ç‚¹(node)å°±æ˜¯ä¸€ä¸ªElasticsearchå®ä¾‹ï¼Œè€Œä¸€ä¸ªé›†ç¾¤(cluster)ç”±ä¸€ä¸ªæˆ–å¤šä¸ªèŠ‚ç‚¹ç»„æˆï¼Œå®ƒä»¬å…·æœ‰ç›¸åŒçš„cluster.nameï¼Œå®ƒä»¬ååŒå·¥ä½œï¼Œåˆ†äº«æ•°æ®å’Œè´Ÿè½½ã€‚å½“åŠ å…¥æ–°çš„èŠ‚ç‚¹æˆ–è€…åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œé›†ç¾¤å°±ä¼šæ„ŸçŸ¥åˆ°å¹¶å¹³è¡¡æ•°æ®ã€‚
é›†ç¾¤ä¸­ä¸€ä¸ªèŠ‚ç‚¹ä¼šè¢«é€‰ä¸¾ä¸ºä¸»èŠ‚ç‚¹(master),å®ƒå°†ä¸´æ—¶ç®¡ç†é›†ç¾¤çº§åˆ«çš„ä¸€äº›å˜æ›´ï¼Œä¾‹å¦‚æ–°å»ºæˆ–åˆ é™¤ç´¢å¼•ã€å¢åŠ æˆ–ç§»é™¤èŠ‚ç‚¹ç­‰ã€‚ä¸»èŠ‚ç‚¹ä¸å‚ä¸æ–‡æ¡£çº§åˆ«çš„å˜æ›´æˆ–æœç´¢ï¼Œè¿™æ„å‘³ç€åœ¨æµé‡å¢é•¿çš„æ—¶å€™ï¼Œè¯¥ä¸»èŠ‚ç‚¹ä¸ä¼šæˆä¸ºé›†ç¾¤çš„ç“¶é¢ˆã€‚ä»»ä½•èŠ‚ç‚¹éƒ½å¯ä»¥æˆä¸ºä¸»èŠ‚ç‚¹ã€‚æˆ‘ä»¬ä¾‹å­ä¸­çš„é›†ç¾¤åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥å®ƒä¼šå……å½“ä¸»èŠ‚ç‚¹çš„è§’è‰²ã€‚

é›†ç¾¤å¥åº·
åœ¨Elasticsearché›†ç¾¤ä¸­å¯ä»¥ç›‘æ§ç»Ÿè®¡å¾ˆå¤šä¿¡æ¯ï¼Œä½†æ˜¯åªæœ‰ä¸€ä¸ªæ˜¯æœ€é‡è¦çš„ï¼šé›†ç¾¤å¥åº·(cluster health)ã€‚é›†ç¾¤å¥åº·æœ‰ä¸‰ç§çŠ¶æ€ï¼šgreenã€yellowæˆ–redã€‚
GET /_cluster/health
curl -GET 'http://localhost:9200/_cluster/health'
åœ¨ä¸€ä¸ªæ²¡æœ‰ç´¢å¼•çš„ç©ºé›†ç¾¤ä¸­è¿è¡Œå¦‚ä¸ŠæŸ¥è¯¢ï¼Œå°†è¿”å›è¿™äº›ä¿¡æ¯ï¼š
{
   "cluster_name":          "elasticsearch",
   "status":                "green", <1>
   "timed_out":             false,
   "number_of_nodes":       1,
   "number_of_data_nodes":  1,
   "active_primary_shards": 0,
   "active_shards":         0,
   "relocating_shards":     0,
   "initializing_shards":   0,
   "unassigned_shards":     0
}

-------------------------------------------------------------

ä¸ºäº†å°†æ•°æ®æ·»åŠ åˆ°Elasticsearchï¼Œæˆ‘ä»¬éœ€è¦ç´¢å¼•(index)â€”â€”ä¸€ä¸ªå­˜å‚¨å…³è”æ•°æ®çš„åœ°æ–¹ã€‚å®é™…ä¸Šï¼Œç´¢å¼•åªæ˜¯ä¸€ä¸ªç”¨æ¥æŒ‡å‘ä¸€ä¸ªæˆ–å¤šä¸ªåˆ†ç‰‡(shards)çš„â€œé€»è¾‘å‘½åç©ºé—´(logical namespace)â€.
ä¸€ä¸ªåˆ†ç‰‡(shard)æ˜¯ä¸€ä¸ªæœ€å°çº§åˆ«â€œå·¥ä½œå•å…ƒ(worker unit)â€,å®ƒåªæ˜¯ä¿å­˜äº†ç´¢å¼•ä¸­æ‰€æœ‰æ•°æ®çš„ä¸€éƒ¨åˆ†ã€‚
åˆ†ç‰‡æ˜¯Elasticsearchåœ¨é›†ç¾¤ä¸­åˆ†å‘æ•°æ®çš„å…³é”®ã€‚æŠŠåˆ†ç‰‡æƒ³è±¡æˆæ•°æ®çš„å®¹å™¨ã€‚æ–‡æ¡£å­˜å‚¨åœ¨åˆ†ç‰‡ä¸­ï¼Œç„¶ååˆ†ç‰‡åˆ†é…åˆ°ä½ é›†ç¾¤ä¸­çš„èŠ‚ç‚¹ä¸Šã€‚å½“ä½ çš„é›†ç¾¤æ‰©å®¹æˆ–ç¼©å°ï¼ŒElasticsearchå°†ä¼šè‡ªåŠ¨åœ¨ä½ çš„èŠ‚ç‚¹é—´è¿ç§»åˆ†ç‰‡ï¼Œä»¥ä½¿é›†ç¾¤ä¿æŒå¹³è¡¡ã€‚
åˆ†ç‰‡å¯ä»¥æ˜¯ä¸»åˆ†ç‰‡(primary shard)æˆ–è€…æ˜¯å¤åˆ¶åˆ†ç‰‡(replica shard)ã€‚ä½ ç´¢å¼•ä¸­çš„æ¯ä¸ªæ–‡æ¡£å±äºä¸€ä¸ªå•ç‹¬çš„ä¸»åˆ†ç‰‡ï¼Œæ‰€ä»¥ä¸»åˆ†ç‰‡çš„æ•°é‡å†³å®šäº†ç´¢å¼•æœ€å¤šèƒ½å­˜å‚¨å¤šå°‘æ•°æ®ã€‚
ç†è®ºä¸Šä¸»åˆ†ç‰‡èƒ½å­˜å‚¨çš„æ•°æ®å¤§å°æ˜¯æ²¡æœ‰é™åˆ¶çš„ï¼Œé™åˆ¶å–å†³äºä½ å®é™…çš„ä½¿ç”¨æƒ…å†µã€‚åˆ†ç‰‡çš„æœ€å¤§å®¹é‡å®Œå…¨å–å†³äºä½ çš„ä½¿ç”¨çŠ¶å†µï¼šç¡¬ä»¶å­˜å‚¨çš„å¤§å°ã€æ–‡æ¡£çš„å¤§å°å’Œå¤æ‚åº¦ã€å¦‚ä½•ç´¢å¼•å’ŒæŸ¥è¯¢ä½ çš„æ–‡æ¡£ï¼Œä»¥åŠä½ æœŸæœ›çš„å“åº”æ—¶é—´ã€‚

å¤åˆ¶åˆ†ç‰‡åªæ˜¯ä¸»åˆ†ç‰‡çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œå®ƒå¯ä»¥é˜²æ­¢ç¡¬ä»¶æ•…éšœå¯¼è‡´çš„æ•°æ®ä¸¢å¤±ï¼ŒåŒæ—¶å¯ä»¥æä¾›è¯»è¯·æ±‚ï¼Œæ¯”å¦‚æœç´¢æˆ–è€…ä»åˆ«çš„shardå–å›æ–‡æ¡£ã€‚
å½“ç´¢å¼•åˆ›å»ºå®Œæˆçš„æ—¶å€™ï¼Œä¸»åˆ†ç‰‡çš„æ•°é‡å°±å›ºå®šäº†ï¼Œä½†æ˜¯å¤åˆ¶åˆ†ç‰‡çš„æ•°é‡å¯ä»¥éšæ—¶è°ƒæ•´ã€‚

-------------------------------------------------------------

æ–‡æ¡£å…ƒæ•°æ®
ä¸€ä¸ªæ–‡æ¡£ä¸åªæœ‰æ•°æ®ã€‚å®ƒè¿˜åŒ…å«äº†å…ƒæ•°æ®(metadata)â€”â€”å…³äºæ–‡æ¡£çš„ä¿¡æ¯ã€‚ä¸‰ä¸ªå¿…é¡»çš„å…ƒæ•°æ®èŠ‚ç‚¹æ˜¯ï¼š
èŠ‚ç‚¹	è¯´æ˜
_index	æ–‡æ¡£å­˜å‚¨çš„åœ°æ–¹
_type	æ–‡æ¡£ä»£è¡¨çš„å¯¹è±¡çš„ç±»
_id	æ–‡æ¡£çš„å”¯ä¸€æ ‡è¯†

_index
ç´¢å¼•(index)ç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“é‡Œçš„â€œæ•°æ®åº“â€â€”â€”å®ƒæ˜¯æˆ‘ä»¬å­˜å‚¨å’Œç´¢å¼•å…³è”æ•°æ®çš„åœ°æ–¹ã€‚
äº‹å®ä¸Šï¼Œæˆ‘ä»¬çš„æ•°æ®è¢«å­˜å‚¨å’Œç´¢å¼•åœ¨åˆ†ç‰‡(shards)ä¸­ï¼Œç´¢å¼•åªæ˜¯ä¸€ä¸ªæŠŠä¸€ä¸ªæˆ–å¤šä¸ªåˆ†ç‰‡åˆ†ç»„åœ¨ä¸€èµ·çš„é€»è¾‘ç©ºé—´ã€‚ç„¶è€Œï¼Œè¿™åªæ˜¯ä¸€äº›å†…éƒ¨ç»†èŠ‚â€”â€”æˆ‘ä»¬çš„ç¨‹åºå®Œå…¨ä¸ç”¨å…³å¿ƒåˆ†ç‰‡ã€‚å¯¹äºæˆ‘ä»¬çš„ç¨‹åºè€Œè¨€ï¼Œæ–‡æ¡£å­˜å‚¨åœ¨ç´¢å¼•(index)ä¸­ã€‚

_type
åœ¨åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å¯¹è±¡è¡¨ç¤ºä¸€äº›â€œäº‹ç‰©â€ï¼Œä¾‹å¦‚ä¸€ä¸ªç”¨æˆ·ã€ä¸€ç¯‡åšå®¢ã€ä¸€ä¸ªè¯„è®ºï¼Œæˆ–è€…ä¸€å°é‚®ä»¶ã€‚æ¯ä¸ªå¯¹è±¡éƒ½å±äºä¸€ä¸ªç±»(class)ï¼Œè¿™ä¸ªç±»å®šä¹‰äº†å±æ€§æˆ–ä¸å¯¹è±¡å…³è”çš„æ•°æ®ã€‚userç±»çš„å¯¹è±¡å¯èƒ½åŒ…å«å§“åã€æ€§åˆ«ã€å¹´é¾„å’ŒEmailåœ°å€ã€‚

_id
idä»…ä»…æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå®ƒä¸_indexå’Œ_typeç»„åˆæ—¶ï¼Œå°±å¯ä»¥åœ¨Elasticsearchä¸­å”¯ä¸€æ ‡è¯†ä¸€ä¸ªæ–‡æ¡£ã€‚å½“åˆ›å»ºä¸€ä¸ªæ–‡æ¡£ï¼Œä½ å¯ä»¥è‡ªå®šä¹‰_idï¼Œä¹Ÿå¯ä»¥è®©Elasticsearchå¸®ä½ è‡ªåŠ¨ç”Ÿæˆã€‚


---------------------------------------


è®©æˆ‘ä»¬åœ¨é›†ç¾¤ä¸­å”¯ä¸€ä¸€ä¸ªç©ºèŠ‚ç‚¹ä¸Šåˆ›å»ºä¸€ä¸ªå«åšblogsçš„ç´¢å¼•ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç´¢å¼•è¢«åˆ†é…5ä¸ªä¸»åˆ†ç‰‡ï¼Œä½†æ˜¯ä¸ºäº†æ¼”ç¤ºçš„ç›®çš„ï¼Œæˆ‘ä»¬åªåˆ†é…3ä¸ªä¸»åˆ†ç‰‡å’Œä¸€ä¸ªå¤åˆ¶åˆ†ç‰‡ï¼ˆæ¯ä¸ªä¸»åˆ†ç‰‡éƒ½æœ‰ä¸€ä¸ªå¤åˆ¶åˆ†ç‰‡ï¼‰ï¼š
curl -XPUT 'http://localhost:9200/blogs' -d '
{
   "settings" : {
      "number_of_shards" : 3,
      "number_of_replicas" : 1
   }
}'


